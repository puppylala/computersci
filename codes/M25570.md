```python
a=int(input())  
list1=[]  
for i in range(a):  
    list1.append(list(map(int,input().split())))  
list3=[[] for k in range(a)]#shushuzu  
for i in range(a):  
    for j in range(a):  
        list3[j].append(list1[i][j])  
list2=[]  
def matrix(aa:list,bb:list):  
    nubsum=sum(aa[0])+sum(aa[-1])+sum(bb[0])+sum(bb[-1])-aa[0][0]-aa[0][-1]-aa[-1][-1]-aa[-1][0]  
    list2.append(nubsum)  
for i in range(int((a-1)/2+1)):  
    if len(list1)==1:  
        list2.append(list1[0][0])  
        break  
    elif len(list1)==2:  
        matrix(list1, list3)  
        break  
    else:  
        matrix(list1, list3)  
    t=a-2*i  
    for k in range(t):  
        del list1[k][0],list1[k][-1]  
        del list3[k][0],list3[k][-1]  
    del list1[0],list1[-1]  
    del list3[0],list3[-1]  
print(max(list2))
```